import nltk
from nltk.tokenize.punkt import PunktSentenceTokenizer
import time
from nltk.tree import Tree

def processing_pages(text_list):
    ne_master = []

    for i in range(len(text_list)): #text_list contains all the text articles of identified landmarks.
        ne_single_page = []
        
        custom_sent_tokenizer = PunktSentenceTokenizer() #Trained vs not? Leaving as default
        
        tokenized = custom_sent_tokenizer.tokenize(text_list[i]) #Attempt at tokenizing each sentence within Wikipedia page. Potential problems with new lines & content
        
        for sentence in tokenized:
            words = nltk.word_tokenize(sentence) #Unigram tokenized words. Sometimes has problems parsing sentences with addresses. 
            
            tagged = nltk.pos_tag(words) #Pretty much the same list as earlier, but with each word as a tuple now with POS as second part of tuple.
            
            namedEnt = nltk.ne_chunk(tagged) #NLTK tree object
            
            ne_in_sent = []
            for subtree in namedEnt: #Tuple? or tree type if there's a named entity in it?
                if type(subtree) == Tree: # If subtree is a noun chunk, i.e. NE != "O"
                    ne_label = subtree.label() #String type, it's the prefix before the named entity
                    
                    ne_string = " ".join([token for token, pos in subtree.leaves()]) #String, name of the named entity?
                    
                    ne_in_sent.append((ne_string, ne_label)) #List of named entities, and the NE type?
                    
            ne_single_page.append(ne_in_sent)
            
        ne_master.append(ne_single_page)

    print(ne_master)
    print(len(ne_master))

    for i in range(len(ne_master)): #Prints out length of master named entity recognition list for each page
        print(len(ne_master[i]))
        print('^ Whoop')
        
    return ne_master
        
if __name__ == '__main__':
    text_list = ['Hi, I\'m John Green. This is Crash Course World History, and today we\'re going to talk about civilization.\nOh, Mr. Green, Mr. Green I have that video game. I like to play as the Assyrians!\nYeah, Me From The Past. It was a video game. In fact, it still is a video game; they\'ve continued to update it.\nBut, you know, like actual civilization, its best days are probably behind it.\n[Theme Music]\nSo those of you who watched our first series will remember that civilization is a complicated and controversial concept.\nLike to describe an individual or a group as civilized is to give them a privileged status that they maybe haven\'t earned\nwhile to call someone uncivilized is an insult, right?\nAnd according to the usual mythology about civilizations, there are these uncivilized barbarians often from the hills or the forest or the steppe\nand they realize the benefits of settled agriculture and give up their barbaric ways to settle in the valleys, eventually assimilating into civilized society.\nThat\'s a really neatly packaged story, right?\nLike people all around the world come to the same realization and they all make progress and become civilized, but what if it\'s not actually true?\nSo today a little something for the anarchist historians among you.\nWe\'re going to look at The Art of Not Being Governed: An Anarchist History of Upland Southeast Asia by James Scott.\nScott argues that our view of hill people as primitive, tribal barbarians has it all wrong, and he calls into question much of what we assume about civilization.\nSo as you know, here at Crash Course World History we like to approach history from many different perspectives\nbecause history isn\'t just about what happened, it\'s also about how we think about what happened.\nSo here you go anarchists, we are finally going to address your burning suspicion that civilization does not actually require a state.\nSo long time Crash Course viewers will remember that many of the earliest civilizations were founded in river valleys,\nprobably because the rivers brought water and made agriculture easier and more predictable.\nYou know, you got the big 3: ancient Egypt, ancient Mesopotamia, and the Indus Valley civilization- all near river valleys.\nIn fact, one of them is named after the Indus River, and because the land was so fertile for agriculture,\nyou could finally have large, concentrated populations because there was a food surplus.\nEverything that we associate with civilization -- from the idea that different people can have different jobs to like, this video camera -- all a result of food surplus.\nBecause if some people couldn\'t create enough food for all people, then, like, all people would be very focused on getting food.\nHaving a food surplus was a huge change compared to like the first 100,000 years of humanity when everyone was a hunter-gatherer.\nFood surplus led to population growth and population concentration which led to states and what we tend to call civilizations\nwhich are characterized by good things like writing and arts and grocery stores, so that\'s the traditional narrative, but I\'m not sure that it\'s the whole story.\nLet\'s go the Thought Bubble.\nNow we might equate civilization with high culture, but historically it\'s probably more accurate to equate it with state control.\nThe Han Chinese who were a pretty successful civilizing empire back in the day, wrote of barbarians as people who were beyond state control.\nSome of these so-called barbarians were pastoral nomads whose raiding posed a genuine threat to the Chinese, but others were people who lived in the hills.\nSo the opposition of civilized agricultural societies living in the valleys and barbarian hill people is as old as, you know, like, the hills.\nAnd one of the earliest and most famous examples of the town vs. country debate is the Epic of Gilgamesh\nwhere Enkidu, the wild man from the hills, goes to town, spends seven days with a prostitute, joins civilization and becomes Gilgamesh\'s best friend.\nIn Southeast Asia, the story that hill people were dazzled by civilization and joined up circulated as well.\nHere, though, the civilizing force was the reading of religious or philosophical texts.\nBut more important than either access to Classical age texts, or civilizing experiences in the city, was that civilizations were based on settled agriculture and were associated with states.\nIn a way, it can be argued that without a state, there\'s no such thing as a barbarian.\nBut because we live in states, we tend to think that they are\nA) Necessary B) Timeless, and C) overall a pretty good thing,\nand almost all civilizations are associated with states, like ancient Egypt, or China in the remote past or France if you\'re into Western civilization.\nThanks Thought Bubble.\nI mean it\'s telling that the Mongols were arguably the greatest conquerors of the premodern world, but we usually don\'t call them a civilization.\nThey weren\'t just agriculture-y and state-like enough.\nAlthough of course the Mongols being the Mongols, there is an exception to the rule:\nthe Mongols DID settle in a recognizable state in Yuan China.\n[Mongol Theme Music]\nUghhh, history, even your exceptions have exceptions.\nSo when we talk about states, we need to remember that it\'s pretty common for the creation of states to involve some form of coercion\nlike in ancient, and sometimes, not ancient societies, the power of the state rested primarily on two things - the army and taxes.\nAnd if you want to create an army or raise taxes, or both, it\'s helpful to have a sedentary population that spends most of its time producing food because food is very valuable to a state.\nI mean, while gold and palaces are beautiful, you can\'t feed them to your army.\nAnyway, agricultural production and the creation of states are deeply intertwined.\nAgricultural surplus and control over it leads to other aspects of civilization like property rights and patriarchy.\nWell, I guess it doesn\'t have to lead to patriarchy, but it usually has.\nSo if states rely on the exploitation of agricultural labor and the subjugation of their citizens,\nthen the civilization narrative that barbarians were drawn to civilizations by their obvious superiority is kind of problematic.\nBecause there\'s a big downside to all that state control and taxes and conscription and servitude.\nAnd this leads us to James Scott\'s big idea that rather than primitive hill tribes being attracted to the glamour and stability of valley settlements,\nhill cultures are formed by people running away from civilization;\nbasically, Scott argues that people flee to the hills because it makes it hard for states to find and conquer them.\nThe Arab historian, Ibn Khaldun remarked that Arabs can gain control over flat territory and do not pursue tribes that hide in the mountains.\nThen you have the Franco-Hungarian military officer, Baron de Tott, poetically exclaiming that \"The steepest places have always been the asylum of liberty\",\nbut the great French Historian Fernand Braudel probably summed it up best when he wrote,\n\"The mountains as a rule are a world apart from civilizations which are an urban and lowland achievement. Their history is to have none, to remain always on the fringes of the great waves of civilization...\"\nAnd you may have noticed from the mountainous tribal areas of Pakistan to people in Colorado with their legal marijuana, it\'s still kind of difficult for states to control hill people.\nThis idea turns the civilization narrative on its head.\nHill people are not barbarians waiting to become civilized. They\'re refugees from civilization itself.\nAnd this brings up the possibility that life in the hills is actually better than settled agricultural states with their wars and taxes and forced labor.\nFurthermore, cities and settlements breed epidemic diseases and when the next Spanish flu comes for all of us, it\'s going to be good to be in the mountains.\nThat said, I\'m not a 100% sold on the argument, which is why I\'m living in very flat, very civilized Indianapolis.\nI mean, as I said earlier, without agricultural surpluses, we wouldn\'t have the Internet, which I\'m fond of, also I have tried the hunter-gather paleo diet and it did not suit me. I like Doritos.\nStan just told me that the paleo diet is not in fact, the diet the people of the hills have, apparently the kind of agriculture they used was called swiddening?\nIt means shifting cultivation, and apparently it\'s great because it provides a more varied diet with less effort.\nScore another one for the hill people. Maybe I\'ll try to popularize the swidden diet. Ohhh! Time for the Open Letter!\nOh my God, the new globe opens and food comes out of it!! Is it my birthday? Man, I love our new globe!\nAnyway, an open letter to fad diets. Dear fad diets, you know what doesn\'t work? Eating unheathily.\nYou know what does work? Eating healthily. Your noble prehistoric heritage as a scavenger has prepared you to eat anything. Anything that is food.\nSo the idea of eating only one kind of food is just sort of inherently ludicrous.\nI mean the average freegan is literally healthier than I am, and they just eat whatever is in the dumpster.\nIn short, fad diets, eating discarded food is much more in line with most of human history than the paleo diet.\nBest wishes, John Green.\nAll right, so far, much of what I\'ve said can be applied to hill people from all over the world at various times,\nbut the focus of Scott\'s book is the region of upland Southeast Asia and southern China that he calls \"Zomia.\"\nZomia is mountainous and jungle-y and home to between 80 and 100 million people.\nIt\'a a little hard to conceptualize because we\'re so used to thinking of history in terms of states, and this region is, to quote him, \"relatively stateless.\"\nZomia was at least partially created by slavery actually because flight from slavery is one of the main reasons that people head for the hills.\nAccording to Scott, \"Southeast Asian states were slaving states, without exception, some of them until well into the twentieth century.\nWars in pre-colonial Southeast Asia were less about territory than about the seizure of as many captives as possible who were then resettled at the core of the winner\'s territory.\"\nI can just hear all you Crash Course viewers saying, \"Wait, is there any evidence that any of that is true?\"\nKinda... But like if one of the main reasons people create hill cultures like Zomia is to avoid civilizations and one of the hallmarks of civilization is writing?\nThen, it stands to reason that there won\'t be much written evidence from Zomia, as writing is kind of like the bread and butter of traditional history.\nOff-topic, but bread and butter is really no longer the staple of any diet. We should really change that phrase to like the Doritos Locos Tacos and Chipotle burritos of traditional history.\nSo the evidence that we can look at is flawed because it\'s mainly what other people have written about Zomians and their hill-dwelling brethren.\nLike this Portuguese friar Father Sangermano wrote around 1800 that the people of the area, quote,\n\"Unable any longer to bear witness to the heavy oppressions and continual levies of men and money made upon them have withdrawn themselves from their native soil, with all their families...\"\nSo basically, he thought, at least, that they were leaving because of conscription and taxes you know, hallmarks of civilization.\nAnd then there are also later colonialists like Sir Stamford Raffles who, despite his name, was not a clown.\nHe was the founder of British Singapore. Here\'s what he said about colonial rule in Indonesia:\n\"Here I am the advocate of despotism. The strong arm of power is necessary to bring men together and to concentrate them into societies... Sumatra is, in great measure, peopled by innumerable petty tribes subject to no central government...\"\n\"At present, people are as wandering in their habits as birds of the air, and until they are congregated and organized under something like authority, nothing can be done with them.\"\nRaffles there makes an accidental but pretty damning indictment of civilization to say that the reason that people exist is so that something can be done with them.\nNow admittedly this isn\'t particularly strong evidence, and it doesn\'t touch on pre-modern history or the state formation activities of Southeast Asian rulers.\nBut if Europeans\' attitudes and activities drove some people to the mountains, it\'s possible that earlier rulers,\nespecially if they founded their states on war and slavery, and we know in many cases that they did, that they may have had a similar effect.\nSo can we finally conclude that hill people as well as nomads and other cultures that attempt to live outside the state structure are not primitive people left behind by civilization,\nbut those who have made a conscious choice to avoid it?\nWell, in the absence of extensive written records, we call history \"anthropology.\"\nThat\'s a joke for all the anthropology majors out there.\nAnd a number of anthropologists have suggested that people who live separate from our ideas of civilization did indeed make that choice consciously in a wide variety of situations.\nLike in his book Society Against the State, Pierre Clastres argues that the so-called primitive Amerindian societies of South America were not in fact ancient societies that had failed to invent settled agriculture or state forms,\nbut previously sedentary cultivators who abandoned agriculture and fixed villages in response to the effects of conquest.\nSo are all these stateless, social orders finally a response to civilization or just people who haven\'t realized the bounty of civilization yet?\nI don\'t know, and studying history isn\'t really about providing answers. It\'s about providing context.\nThe question of what\'s the best and most just way to organize our social orders is a big question and a very old one.\nBut it\'s something we still need to be asking because we\'re all still making choices about how we\'re going to organize ourselves into communities.\nScott\'s idea of Zomia introduces us to a different way of thinking about things, and equating civilization with coercive state control calls into question the idea of what it even means to be civilized.\nBut I\'m not enough of an anarchist to let this episode go without acknowledging the extraordinary accomplishments of civilization,\nnot just agriculture but every thing from antibiotics to the ability to be connected to people who live half a world away from you.\nThe deep and growing interconnectedness among humans has its risks for sure, but it also provides tremendous opportunities.\nWe can collaborate, we can play each other in FIFA, and we can also do THIS together.\nBut then again, there\'s an extraordinary freedom to Zomian-style social orders, and vitally, their way of life is far more sustainable than ours.\nThanks for watching. I\'ll see you next week.\nCrash Course is made with the help of all of these nice people, and it exists because of your support at Subbable.com.\nSubbable is a voluntary subscription service that allows you to directly support Crash Course,\nso we want to say thank you to all of our Subbable subscribers, and thanks to every one who watches Crash Course.\nI hope that you enjoy our World History series. And as we say in my hometown, don\'t forget to be awesome.']

    ne_master = processing_pages(text_list)
    
    import frequency_NLP
    
    frequency_NLP.frequency_counter(ne_master)
    
    